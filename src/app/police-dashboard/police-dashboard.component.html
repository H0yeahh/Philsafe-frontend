<div class="container">
  <div class="emergency-banner">
    In case of emergencies, please dial your local emergency services number
  </div>
  <div class="flex h-screen">
    <aside class="bg-zinc-100 sidebar p-4 flex flex-col items-center">
      <button type="submit" class="back-button mt-6" style="align-self: flex-start;" (click)="goBack()">BACK</button> <!-- Removed mt-6 class -->
      <div class="p-4 text-center">
        <img src="assets/general.png" alt="Profile Picture" class="rounded-full mb-4" style="width: 180px; height: 180px;">
        <!-- <h2 class="text-lg font-semibold">PCT Jason P. Enriquez</h2>
        <p class="text-sm text-zinc-600">Police Station 2, Abellana </p> -->

        <div *ngIf="adminDetails; else loadingTemplate">
          <h2 class="text-lg font-semibold">{{ adminDetails?.rank_abbr }} {{ adminDetails?.first_name }}
            {{ adminDetails?.last_name }} </h2>
        </div>
  
        <ng-template #loadingTemplate>
          <div id="loading">Loading Police Details...</div>
        </ng-template>
        <p class="text-sm text-zinc-600">Admin</p>
      </div>
      <nav class="mt-4"> <!-- Reduced margin-top to create less space -->
        <ul class="list-none p-0">
          <li>
            <a href="/dashboard" class="nav-link">
              <img src="assets/dashbold.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
              <span>DASHBOARD</span>
            </a>
          </li>
          <li>
            <a href="/police-reports" class="nav-link">
              <img src="assets/cases.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
              <span>REPORTS</span>
            </a>
          </li>
          <li>
            <a href="/police-cases" class="nav-link">
              <img src="assets/cases.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
              <span>CASES</span>
            </a>
          </li>
          <li>
            <a href="/manage-users" class="nav-link">
              <img src="assets/manage user.svg" alt="Inbox Icon" class="w-6 h-6 mr-2">
              <span>MANAGE USER</span>
            </a>
          </li>
          <li>
            <a routerLink="/spammer-users" class="nav-link">
                <img src="assets/manage user.svg" alt="Manage User Icon" class="w-6 h-6 mr-2">
                <span>SPAMMED USER</span>
            </a>
        </li>
          <li>
            <a href="#" class="nav-link">
              <img src="assets/ticket request.svg" alt="Reports Icon" class="w-6 h-6 mr-2">
              <span>TICKET REQUESTS</span>
            </a>
          </li>
          <li>
            <a href="/manage-station" class="nav-link">
              <img src="assets/manage station.svg" alt="Crime Map Icon" class="w-6 h-6 mr-2">
              <span>MANAGE STATION</span>
            </a>
            <li>
              <a href="/police-crime-map" class="nav-link">
                <img src="assets/crime-map.svg" alt="Crime Map Icon" class="w-6 h-6 mr-2">
                <span>CRIME MAP</span>
              </a>
            </li>
        </ul>
      </nav>
      <button type="submit" class="logout-button mt-auto" (click)="logout()" >LOG OUT</button> <!-- Centered logout button -->
    </aside>


  <!-- <div class ="background">
    <div class="main-content bg-background p-6">
      <div class="flex justify-between items-center mb-6 mt-4">
        <select class="border border-zinc-300 rounded p-2">
          <option>Quarterly</option>
          <option>Monthly</option>
          <option>Yearly</option>
        </select>
        <div class="flex items-center space-x-4">
          <button type="submit" class="refresh-button mt-6" style="align-self: flex-start;">
            <span>REFRESH</span>
          </button>
        </div>
      </div>

      <div class="grid grid-cols-3 gap-4 mb-6">
        <div class="bg-blue-100 p-4 rounded-lg text-center">
          <h2 class="text-lg font-bold">User Requests</h2>
          <p class="text-4xl font-bold">498</p>
        </div>
        <div class="bg-green-100 p-4 rounded-lg text-center">
          <h2 class="text-lg font-bold">Total Number of Users</h2>
          <p class="text-4xl font-bold">1,598</p>
        </div>
        <div class="bg-yellow-100 p-4 rounded-lg text-center">
          <h2 class="text-lg font-bold">Number of Stations</h2>
          <p class="text-4xl font-bold">578</p>
        </div>
      </div>
    </div>

      <div class="bg-white p-4 rounded-lg">
        <img src="assets/chart.jpg" alt="Chart Placeholder">
      </div>
    </div>
  </div> -->

  <main class="content">
    <div class="welcome">
      <h3>Welcome back,</h3>
      <div *ngIf="adminDetails; else loading">
        <h1>
          {{ adminDetails?.rank_abbr }} {{ adminDetails?.first_name }}
          {{ adminDetails?.last_name }}
        </h1>
      </div>
      <ng-template #loading>
        <div id="loading">Loading User...</div>
      </ng-template>
    </div>
    
    <div class="header">
      <div></div>
      <form [formGroup]="policedashboardForm">
        <div class="filter">
          <label for="timePeriodSelect">Select Time Period:</label>
          <select 
            id="timePeriodSelect" 
            [formControl]="timePeriodControl"
            (change)="onSelect()">
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
          <!-- Removed the separate button since we're handling change event -->
        </div>
      </form>
    </div>

    <section class="stats">
      <div class="stat-box solved-cases">
        <h3>Weekly Reports</h3>
        <p>{{ weeklyAvg }}</p>
      </div>
      <div class="stat-box reported-cases">
        <h3>Monthly Reports</h3>
        <p>{{ monthlyAvg }}</p>
      </div>
      <div class="stat-box under-investigation">
        <h3>Annual Reports</h3>
        <p>{{ annualAvg}}</p>
      </div>
    </section>

    <section class="graph-section">
      <canvas id="casesGraph"></canvas>
    </section>
    
  </main>
</div>
</div>