        <div class="container">
            <div class="emergency-banner">
              In case of emergencies, please dial your local emergency services number
            </div>
            <div class="flex h-screen">
        
              <aside class="bg-zinc-100 sidebar p-4 flex flex-col items-center">
                <button type="button" class="back-button mt-6" style="align-self: flex-start;" (click)="goBack()">BACK</button>
                <div class="p-4 text-center">
                  <img src="assets/general.png" alt="Profile Picture" class="rounded-full mb-4" style="width: 180px; height: 180px;">
        
                  <div *ngIf="adminDetails; else loadingTemplate">
                    <h2 class="text-lg font-semibold">{{ adminDetails?.rank_abbr }} {{ adminDetails?.first_name }}
                      {{ adminDetails?.last_name }} </h2>
                  </div>
            
                  <ng-template #loadingTemplate>
                    <div id="loading">Loading Police Details...</div>
                  </ng-template>
                  <p class="text-sm text-zinc-600">Admin</p>
                </div>
                <nav class="mt-4">
                  <ul class="list-none p-0">
                    <li>
                      <a routerLink="/dashboard" class="nav-link">
                          <img src="assets/dashbold.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
                          <span>DASHBOARD</span>
                      </a>
                  </li>
                  <li>
                    <a href="/police-reports" class="nav-link">
                      <img src="assets/cases.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
                      <span>REPORTS</span>
                    </a>
                  </li>
                  <!-- <li>
                    <a href="/evidences" class="nav-link">
                      <img src="assets/ticket request.svg" alt="Reports Icon" class="w-6 h-6 mr-2">
                      <span>EVIDENCES</span>
                    </a>
                  </li>
                  <li>
                      <a href="/police-cases" class="nav-link">
                        <img src="assets/cases.svg" alt="Dashboard Icon" class="w-6 h-6 mr-2">
                        <span>CASES</span>
                      </a>
                    </li> -->
                  <li>
                      <a routerLink="/manage-users" class="nav-link">
                          <img src="assets/manage user.svg" alt="Manage User Icon" class="w-6 h-6 mr-2">
                          <span>MANAGE USER</span>
                      </a>
                  </li>
                  <li>
                    <a routerLink="/spammer-users" class="nav-link">
                        <img src="assets/manage user.svg" alt="Manage User Icon" class="w-6 h-6 mr-2">
                        <span>SPAMMED USER</span>
                    </a>
                </li>
                  <li>
                      <a routerLink="/manage-station" class="nav-link">
                          <img src="assets/manage station.svg" alt="Manage Station Icon" class="w-6 h-6 mr-2">
                          <span>MANAGE STATION</span>
                      </a>
                  </li>
                  <li>
                      <a routerLink="/station-crime-map" class="nav-link">
                          <img src="assets/crime-map.svg" alt="Crime Map Icon" class="w-6 h-6 mr-2">
                          <span>CRIME MAP</span>
                      </a>
                  </li>
                  </ul>
                </nav>
                <button type="button" class="logout-button mt-auto" (click)="logout()">LOG OUT</button>            
              </aside>
          
              <!-- Main Content -->
              <div class="main-content">
                <div class="new-reports-container">
                    <a href="/spam-reports" class="new-reports-link">
                        SPAM REPORTS
                        <span class="new-reports-badge"></span>
                    </a>
                </div>
          
                <!-- User Table -->
                <div class="table-container mt-8">
                  <!-- <div class="table-controls flex justify-between items-center mb-4"> -->
                    <!-- <form [formGroup]="policereportsForm" class="filter" (ngSubmit)="onSubmit()"> -->
                      <!-- <input type="text" placeholder="Search user" formControlName="search" class="search-bar" > -->
                      <!-- <input
                      type="text" [(ngModel)]="searchQuery" (ngModelChange)="filterUsers()"
                        placeholder="Search"
                        
                        class="search-input"
                      /> -->
                      <div class="search-container">
                        <input
                          type="text"
                          [(ngModel)]="searchQuery"
                          (ngModelChange)="filterReports()"
                          placeholder="Search"
                          class="search-input"
                        />
              
                        <div class="filterReports">
                          <label>Filter Reports</label>
                          <select [(ngModel)]="selectedRemark" (change)="filterReportsByRemark()">
                            <option [value]="'all'">All</option>
                            <option [value]="'forEndorse'">For Endorse</option>
                            <option [value]="'markedAsSpam'">Marked as Spam</option>
                          </select>
                        </div>   
                      </div>
                    <!-- </form> -->
                  <table class="user-table w-full border-collapse">
                    <thead>
                      <tr>
                        <th class="border border-zinc-300 p-2">REPORT ID</th>
                        <th class="border border-zinc-300 p-2">INCIDENT TYPE</th>
                        <th class="border border-zinc-300 p-2">COMPLAINANT</th>
                        <th class="border border-zinc-300 p-2">DATE RECIEVED</th>
                        <th class="border border-zinc-300 p-2">REMARKS</th>
                        <th class="border border-zinc-300 p-2">ACTION</th>
                      </tr>
                    </thead>
                    <!-- <tbody>
                      <tr *ngFor="let report of reports | paginate: { 
                        id: 'citizen', 
                        itemsPerPage: pageSize, 
                        currentPage: currentPage, 
                        totalItems: totalReports 
                      }; let i = index"
            [id]="'citizen-' + report.report_id">
                            <td  class="border border-zinc-300 p-2">{{ report.report_id }}</td>
                            <td  class="border border-zinc-300 p-2">{{ report.subcategory_name }}</td>
                            <td  class="border border-zinc-300 p-2">{{ report.citizen_id }}</td>
                            <td  class="border border-zinc-300 p-2">{{ report.reported_date }}</td>
                            <div *ngIf="!report.is_spam; else spamReports">
                              <td style="text-decoration: none; color: #00c900">For Endorse</td>
                            </div>
                            <ng-template #spamReports>
                              <td style="color: red;">Marked as Spam</td>
                            </ng-template>
                            <td  class="border border-zinc-300 p-2">
                              
                          <button (click)="editCitizen(report)" class="action-btn edit">✏️</button>
                          <button type="button" class="spam-button" (click)="markAsSpam(report.report_id)">
                            SPAM
                         </button>
                          <button (click)="verifyCitizen(user)" class="action-btn reinstate">VERIFY</button>
                        </td>
                      </tr>
                    </tbody> -->
                    <tbody>
                      <!-- If there is a search query -->
                      <ng-container *ngIf="searchQuery || selectedRemark !== 'all'; else defaultReports">
                        <!-- Show filtered reports if results are found -->
                        <ng-container *ngIf="filteredReports.length > 0; else noResults">
                          <tr
                            *ngFor="
                              let report of filteredReports
                                | paginate
                                  : {
                                      id: 'cases',
                                      itemsPerPage: pageSize,
                                      currentPage: currentPage,
                                      totalItems: totalReports
                                    }
                            "
                            [id]="'report-' + report.report_id"
                            (click)="navigateToEndorseEvidences(report.report_id)"
                          >
                            <td>
                              <span
                                [class.highlight]="
                                  isFieldMatched(getCitizenName(report.citizen_id), searchQuery)
                                "
                                [innerHTML]="highlight(getCitizenName(report.citizen_id))"
                              ></span>
                            </td>
                            <td>
                              <span
                                [class.highlight]="
                                  isFieldMatched(report.report_id, searchQuery)
                                "
                                [innerHTML]="highlight(report.report_id)"
                              ></span>
                            </td>
                            <td>
                              <span
                                [class.highlight]="
                                  isFieldMatched(report.subcategory_name, searchQuery)
                                "
                                [innerHTML]="highlight(report.subcategory_name)"
                              ></span>
                            </td>
                            <td>
                              <span
                                [class.highlight]="
                                  isFieldMatched(report.reported_date, searchQuery)
                                "
                                [innerHTML]="highlight(report.reported_date | date)"
                              ></span>
                            </td>
                            <div *ngIf="!report.is_spam; else spamReports">
                              <td style="text-decoration: none; color: #00c900">For Endorse</td>
                            </div>
                            <ng-template #spamReports>
                              <td style="color: red;">Marked as Spam</td>
                            </ng-template>
                            <!-- <td
                              class="icon"
                              (click)="deleteReport(report.report_id); $event.stopPropagation()"
                            >
                              <img src="assets/delete.svg" />
                            </td> -->
                            <td  class="border border-zinc-300 p-2">
                                  
                              <!-- <button (click)="editCitizen(report)" class="action-btn edit">✏️</button> -->
                              <button type="button" class="spam-button" (click)="markAsSpam(report.report_id)">
                                SPAM
                             </button>
                              <!-- <button (click)="verifyCitizen(user)" class="action-btn reinstate">VERIFY</button> -->
                            </td>
                          </tr>
                        </ng-container>
                    
                        <!-- No results found -->
                        <ng-template #noResults>
                          <tr>
                            <td colspan="6" class="no-results">
                              No results found for "{{ searchQuery }}"
                            </td>
                          </tr>
                        </ng-template>
                      </ng-container>
                    
                      <!-- Default reports -->
                      <ng-template #defaultReports>
                        <tr
                          *ngFor="
                            let report of reports
                              | paginate
                                : {
                                    id: 'cases',
                                    itemsPerPage: pageSize,
                                    currentPage: currentPage,
                                    totalItems: totalReports
                                  }
                          "
                          (click)="navigateToEndorseEvidences(report.report_id)"
                        >
                          <td *ngIf="citizens">
                            {{ getCitizenName(report.citizen_id) }}
                          </td>
                          <td class="border border-zinc-300 p-2">{{ report.report_id }}</td>
                          <td class="border border-zinc-300 p-2">{{ report.subcategory_name }}</td>
                          <td class="border border-zinc-300 p-2">{{ report.reported_date | date }}</td>
                          <!-- <div *ngIf="!report.is_spam; else spamReports"> -->
                            <td  
                            *ngIf="!report.is_spam; else spamReports"
                            class="border border-zinc-300 p-2" 
                            style="color: #00c900">For Endorse</td>
                          <!-- </div> -->
                          <ng-template #spamReports>
                            <td class="border border-zinc-300 p-2" style="color: red;">Marked as Spam</td>
                          </ng-template>
                          <!-- <td
                            class="icon"
                            (click)="deleteReport(report.report_id); $event.stopPropagation()"
                          >
                            <img src="assets/delete.svg" />
                          </td> -->
    
                          <td  class="border border-zinc-300 p-2">
                                  
                            <!-- <button (click)="editCitizen(report)" class="action-btn edit">✏️</button> -->
                            <button type="button" class="spam-button" (click)="markAsSpam(report.report_id)">
                              SPAM
                           </button>
                            <!-- <button (click)="verifyCitizen(user)" class="action-btn reinstate">VERIFY</button> -->
                          </td>
                        </tr>
                      </ng-template>
                    </tbody>
                    
                  </table>
                  <pagination-controls id="cases" (pageChange)="currentPage = $event">
                  </pagination-controls>
                </div>
              </div>
            </div>
          </div>
          
        